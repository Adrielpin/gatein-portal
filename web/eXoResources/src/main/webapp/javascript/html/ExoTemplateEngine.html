<!--

    Copyright (C) 2009 eXo Platform SAS.
    
    This is free software; you can redistribute it and/or modify it
    under the terms of the GNU Lesser General Public License as
    published by the Free Software Foundation; either version 2.1 of
    the License, or (at your option) any later version.
    
    This software is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
    Lesser General Public License for more details.
    
    You should have received a copy of the GNU Lesser General Public
    License along with this software; if not, write to the Free
    Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
    02110-1301 USA, or see the FSF site: http://www.fsf.org.

-->

<html>
  <head>
    <script type="text/javascript" src="../eXo.js"></script>
    <script type="text/javascript" src="../eXo/core/Util.js"></script>
    <script type="text/javascript" src="../eXo/core/DOMUtil.js"></script>
    <script type="text/javascript" src="../eXo/core/Browser.js"></script>
    <script type="text/javascript" src="../eXo/core/TemplateEngine.js"></script>
  </head>

  <body>
    <h3>Test ExoTemplateEngine</h3>
    <script type="text/javascript">
     var context = {value: 'test  param', test: {nested: 'nested value'}} ;
     var template = 
       "<%\n" +
       "  function blockcode(param) { \n" +
       "    return 'call blockcode with param' + param;\n" +
       "  }\n" +
       "%>\n" +

       "<%function myfunc(param) { %>\n" +
       "<%  return 'call myfunc with param' + param; %>\n" +
       "<%}%>\n" +
       
       "<html>\n" +
       "  <body>\n" +
       "    <%for(var i = 0 ; i < 10; i++) {  %>\n" +
       "    <%  var mytest = 'test variable' ;%>\n" +
       "      this is a test <%=context.value%> html\n\r" +
       "      <%=context.value%> , nested test <%=context.test.nested%>\n" +
       "      <%=mytest%>\n" +
       "    <%}%>\n" +
       "    <%= myfunc(context.value)%>\n" +
       "    <%= blockcode(context.value)%>\n" +
       "  </body>\n" +
       "</html>"
      var html = eXo.core.TemplateEngine.toHTML(template, context) ;
      alert(html) ;
      
      html = eXo.core.TemplateEngine.merge("../eXo/core/TemplateEngine.jstmpl", context) ;
      alert(html) ;
    </script>
  </body>
</html>
