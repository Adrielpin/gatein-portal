<!--

    Copyright (C) 2009 eXo Platform SAS.
    
    This is free software; you can redistribute it and/or modify it
    under the terms of the GNU Lesser General Public License as
    published by the Free Software Foundation; either version 2.1 of
    the License, or (at your option) any later version.
    
    This software is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
    Lesser General Public License for more details.
    
    You should have received a copy of the GNU Lesser General Public
    License along with this software; if not, write to the Free
    Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
    02110-1301 USA, or see the FSF site: http://www.fsf.org.

-->

<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook V4.4//EN" "http://www.oasis-open.org/docbook/sgml/4.4/docbookx.dtd">
<section>
	<title>XML Resources Bundles</title>
	<section>
		<title>Motivation</title>
	</section>
	<para>Usually resource bundles are stored in property files
		however as property files are plain files it raise issues with the
		encoding of the file. The XML resource bundle format has been
		developped to provide an alternative to property files.</para>
	<itemizedlist>
		<listitem>The XML format declares the encoding of the file in the
			XML declaration which avoids to use the native2ascii program and mess
			with encoding</listitem>
		<listitem>Property files use the ISO 8859-1 which does not
			cover the full unicode charset and language such as arab would not be
			supported natively and require the use of escaping, leading the files
			to be barely maintainable</listitem>
		<listitem>Tooling support for XML files is better than the
			tooling for Java property files and usually the XML editor cope very
			well with the file encoding.</listitem>
	</itemizedlist>
	<section>
		<title>Portal support</title>
	</section>
	<para>
		In order to be loaded by the portal at runtime (actually the resource
		bundle service), the name of the file must be the same as a property
		file but instead of ending with the
		<emphasis role="bold">.properties</emphasis>
		suffix, it ends with the
		<emphasis role="bold">.xml</emphasis>
		suffix. For instance
		<emphasis role="bold">
			AccountPortlet
			<emphasis role="bold">ar.xml</emphasis>
			instead of
			<emphasis>AccountPortlet</emphasis>
			ar.properties
		</emphasis>
		.
	</para>
	<section>
		<title>XML format</title>
	</section>
	<para>The XML format is very simple and has been developed based on
		the DRY (Don't Repeat Yourself) principle. Usually resource bundle
		keys are hierarchically defined and we can leverage the hierarchic
		nature of the XML for that purpose. Here is an example of turning a
		property file into an XML resource bundle file:</para>
	<para>&lt;STYLE type=&quot;text/css&quot;&gt; .code {width: 97%} &lt;/STYLE&gt;</para><programlisting>UIAccountForm.tab.label.AccountInputSet = ...
UIAccountForm.tab.label.UIUserProfileInputSet = ...
UIAccountForm.label.Profile = ...
UIAccountForm.label.HomeInfo= ...
UIAccountForm.label.BusinessInfo= ...
UIAccountForm.label.password= ...
UIAccountForm.label.Confirmpassword= ...
UIAccountForm.label.email= ...
UIAccountForm.action.Reset= ...
</programlisting><programlisting>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;bundle&gt;
  &lt;UIAccountForm&gt;
    &lt;tab&gt;
      &lt;label&gt;
        &lt;AccountInputSet&gt;...&lt;/AccountInputSet&gt;
        &lt;UIUserProfileInputSet&gt;...&lt;/UIUserProfileInputSet&gt;
      &lt;/label&gt;
    &lt;/tab&gt;
    &lt;label&gt;
      &lt;Profile&gt;...&lt;/Profile&gt;
      &lt;HomeInfo&gt;...&lt;/HomeInfo&gt;
      &lt;BusinessInfo&gt;...&lt;/BusinessInfo&gt;
      &lt;password&gt;...&lt;/password&gt;
      &lt;Confirmpassword&gt;...&lt;/Confirmpassword&gt;
      &lt;email&gt;...&lt;/email&gt;
    &lt;/label&gt;
    &lt;action&gt;
      &lt;Reset&gt;...&lt;/Reset&gt;
    &lt;/action&gt;
  &lt;/UIAccountForm&gt;
&lt;/bundle&gt;
</programlisting>
</section>