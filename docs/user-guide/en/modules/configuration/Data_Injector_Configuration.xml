<!--

    Copyright (C) 2009 eXo Platform SAS.
    
    This is free software; you can redistribute it and/or modify it
    under the terms of the GNU Lesser General Public License as
    published by the Free Software Foundation; either version 2.1 of
    the License, or (at your option) any later version.
    
    This software is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
    Lesser General Public License for more details.
    
    You should have received a copy of the GNU Lesser General Public
    License along with this software; if not, write to the Free
    Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
    02110-1301 USA, or see the FSF site: http://www.fsf.org.

-->

<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook V4.4//EN" "http://www.oasis-open.org/docbook/sgml/4.4/docbookx.dtd">
<section>
	<title>Data Injector Configuration</title>
	<section>
		<title>Data Injector</title>
	</section>
	<para>
		<emphasis>Data-injector</emphasis>
		is an utility to initialize enterprise data for Portal. It is packed
		in a .jar and deployed under $TOMCATHOME/lib. It is started
		automatically when Tomcat starts.
	</para>
	<section>
		<title>OrganizationInitializer</title>
	</section>
	<para>
		<emphasis>OrganizationInitializer</emphasis>
		is the service that allows creating a large organization with many
		groups and users. It also creates portal navigation and page(s) for
		each group, each user.
	</para>
	<section>
		<title>Service configuration file</title>
	</section>
	<programlisting>
&lt;configuration&gt;
  &lt;component&gt;
	&lt;key&gt;org.exoplatform.portal.initializer.organization.OrganizationInitializer&lt;/key&gt;
	&lt;type&gt;org.exoplatform.portal.initializer.organization.OrganizationInitializer&lt;/type&gt;
     &lt;init-params&gt;
      	&lt;value-param&gt;
      		&lt;name&gt;auto.create.group.page.navigation&lt;/name&gt;
      		&lt;description&gt;true or false&lt;/description&gt;
      		&lt;value&gt;true&lt;/value&gt;
      	&lt;/value-param&gt;
      	
      	&lt;value-param&gt;
      		&lt;name&gt;auto.create.user.page.navigation&lt;/name&gt;
      		&lt;description&gt;number of pages per user&lt;/description&gt;
      		&lt;value&gt;10&lt;/value&gt;
      	&lt;/value-param&gt;
      	&lt;object-param&gt;
      		&lt;name&gt;organization&lt;/name&gt;
      		&lt;description&gt;description&lt;/description&gt;
      		&lt;object type=&quot;org.exoplatform.portal.initializer.organization.OrganizationConfig&quot;&gt; &lt;field name=&quot;groups&quot;&gt;
	      	&lt;collection type=&quot;java.util.ArrayList&quot;&gt;
              	 &lt;value&gt;
		  &lt;object type=&quot;org.exoplatform.portal.initializer.organization.OrganizationConfig$GroupsConfig&quot;&gt; &lt;field name=&quot;group&quot;&gt;
		   &lt;object type=&quot;org.exoplatform.services.organization.OrganizationConfig$Group&quot;&gt;
			 &lt;field  name=&quot;name&quot;&gt;&lt;string&gt;province&lt;/string&gt;&lt;/field&gt;
			 &lt;field  name=&quot;parentId&quot;&gt;&lt;string&gt;/africa/tanzania&lt;/string&gt;&lt;/field&gt;
			 &lt;field  name=&quot;description&quot;&gt;&lt;string&gt;Tanzania's province&lt;/string&gt;&lt;/field&gt;
			 &lt;field  name=&quot;label&quot;&gt;&lt;string&gt;Province&lt;/string&gt;&lt;/field&gt;
		    &lt;/object&gt;				          		
			 &lt;/field&gt;	
		    	&lt;field name=&quot;from&quot;&gt;&lt;string&gt;1&lt;/string&gt;&lt;/field&gt;
		       	&lt;field name=&quot;to&quot;&gt;&lt;string&gt;10&lt;/string&gt;&lt;/field&gt;
	           &lt;/object&gt;
              	  &lt;/value&gt;
                &lt;/collection&gt;
	      		&lt;/field&gt;
      			&lt;field name=&quot;users&quot;&gt;
      			       &lt;collection type=&quot;java.util.ArrayList&quot;&gt; 
 
      				&lt;value&gt;
      		                 &lt;object type=&quot;org.exoplatform.portal.initializer.organization.OrganizationConfig$UsersConfig&quot;&gt;
      				    &lt;field name=&quot;user&quot;&gt;
		                  &lt;object type=&quot;org.exoplatform.services.organization.OrganizationConfig$User&quot;&gt;
		                      &lt;field  name=&quot;userName&quot;&gt;&lt;string&gt;user&lt;/string&gt;&lt;/field&gt;
		                      &lt;field  name=&quot;password&quot;&gt;&lt;string&gt;GateInPlatform&lt;/string&gt;&lt;/field&gt;
		                      &lt;field  name=&quot;firstName&quot;&gt;&lt;string&gt;First-Name&lt;/string&gt;&lt;/field&gt;
		                      &lt;field  name=&quot;lastName&quot;&gt;&lt;string&gt;Last-Name&lt;/string&gt;&lt;/field&gt;
		                      &lt;field  name=&quot;email&quot;&gt;&lt;string&gt;exo@localhost&lt;/string&gt;&lt;/field&gt;
		                      &lt;field  name=&quot;groups&quot;&gt;&lt;string&gt;member:/africa&lt;/string&gt;&lt;/field&gt;
		                  &lt;/object&gt;
      				    &lt;/field&gt;
      				      &lt;field name=&quot;from&quot;&gt;&lt;string&gt;0&lt;/string&gt;&lt;/field&gt;
      				      &lt;field name=&quot;to&quot;&gt;&lt;string&gt;9&lt;/string&gt;&lt;/field&gt;
      				 &lt;/object&gt;
      				 &lt;/value&gt;
      				&lt;/collection&gt;
      			 &lt;/field&gt;
      		&lt;/object&gt;
      	    &lt;/object-param&gt;
          &lt;/init-params&gt;
	&lt;/component&gt;  
   
&lt;/configuration&gt;
</programlisting>
<section><title>Parameters for Group</title></section>
<itemizedlist><listitem><emphasis>name</emphasis>: The name of group.</listitem><listitem><emphasis>parentId</emphasis>: The id of parent group. If the parent id is null, it means that the group is at the first level. If parent groups do not exist, it will be created automatically.</listitem><listitem><emphasis>description</emphasis>: The description of group.</listitem><listitem><emphasis>label</emphasis>: The label of group.</listitem><listitem><emphasis>from and to</emphasis>: This group can be cloned to may copies and each copy is marked a number from!images/number.png!images/ to!images/ number.png!.</listitem></itemizedlist>
<section><title>Parameters for User</title></section>
<itemizedlist><listitem><emphasis>userName</emphasis>: The ID of user.</listitem><listitem><emphasis>password</emphasis>: The password of user.</listitem><listitem><emphasis>firstName</emphasis>: The first name of user.</listitem><listitem><emphasis>lastName</emphasis>: The last name of user.</listitem><listitem><emphasis>email</emphasis>: The email of user.</listitem><listitem><emphasis>groups</emphasis>: The list of groups that user join with membership type</listitem><listitem><emphasis>from and to</emphasis>:  This user can be cloned to may copies and each copy is marked a number from!images/number.png!images/ to!images/ number.png!. With this configuration we can create a range of users and put them to various groups and other range to other groups.</listitem></itemizedlist><para>The &quot;<emphasis role="bold"><emphasis>auto.create.group.page.navigation</emphasis></emphasis>&quot; Parameter Value is true or false. If TRUE it automatically create portal navigation and page for each group. If FALSE it does not create portal navigation and page for each group.</para><para>The &quot;<emphasis role="bold"><emphasis>auto.create.user.page.navigation</emphasis></emphasis>&quot; Parameter Value is number of pages that automatically created  for each user.</para>
</section>